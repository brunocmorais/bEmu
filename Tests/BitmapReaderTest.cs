using bEmu.Core.Video;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Diagnostics;
using System.Linq;

namespace Tests
{
    [TestClass]
    public class BitmapReaderTest
    {
        byte[] bitmapTest = 
        {
            0x42, 0x4D, 0x46, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x00, 0x00, 0x00, 0x28, 0x00, 
            0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00, 0x18, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x13, 0x0B, 0x00, 0x00, 0x13, 0x0B, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0x00, 
            0x00, 0x00, 0xFF, 0x00, 0x00, 0x00
        };

        byte[] bitmapTest2 = 
        {
            0x42, 0x4D, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46, 0x00, 0x00, 0x00, 0x38, 0x00, 
            0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00, 0x20, 0x00, 0x03, 0x00, 
            0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x13, 0x0B, 0x00, 0x00, 0x13, 0x0B, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 
            0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF
        };

        [TestMethod]
        public void TestBitmapReader()
        {
            var bitmapReader = BitmapReader.Instance.Read(bitmapTest2);
            Assert.AreEqual(bitmapReader[0, 0], (uint) 0x0000FFFF);
            Assert.AreEqual(bitmapReader[0, 1], (uint) 0xFF0000FF);
            Assert.AreEqual(bitmapReader[1, 0], (uint) 0x00FF00FF);
            Assert.AreEqual(bitmapReader[1, 1], (uint) 0xFFFFFFFF);
        }
    }
}